import{l as p,m as t,p as g,q as i,s as w,t as f}from"./index.90cafe9d.js";const v=p("discordGuilds",()=>{const e=t(),r=t(!1);async function n(){try{r.value=!0;const o=await g("bot");e.value=o,r.value=!1}catch(o){console.error(o),i().addError("Oops something went wrong and we cannot get your guilds list."),r.value=!1}}async function d(o){const s=`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_API_URL}/api/discord/guilds/auth/redirect?discordGuildId=${o}`,a=window.open(s,"","width=500,height=900");!a||(await new Promise(c=>{const u=setInterval(async()=>{a.closed&&(clearInterval(u),c(void 0))},500)}),w.push(`/discord/guilds/${o}`))}async function l(o){try{await f.get(`/api/discord/guilds/auth/callback?${o.replace(/^\?/,"")}`),window.close()}catch(s){console.error(s),i().addError("Oops something went wrong and we cannot load guild.")}}return{guilds:e,loading:r,loadGuilds:n,loginGuild:d,loginGuildCallback:l}});export{v as u};
